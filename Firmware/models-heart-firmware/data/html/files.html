<!DOCTYPE html><html><head><meta charset=utf-8 /><meta name=viewport content="width=800, user-scalable=no" /><meta name=apple-mobile-web-app-capable content=yes /><meta name=mobile-web-app-capable content=yes /><title>Control</title><script src=js/jquery.js></script><script src=js/bootstrap.js></script><script src=js/kvr_workspace.js></script><script src=js/kvr_setup.js></script><link href=css/bootstrap.css rel=stylesheet /><link href=css/kvr_workspace.css rel=stylesheet /><link rel=manifest href=/manifest.json /><style>body{background:#fff}.fdir,.file,.level_up,.del{cursor:pointer}#files-col1{width:55px}#files-col2{width:100%}#files-col3,#files-col4{width:100px}.files th{vertical-align:middle;text-align:center}</style></head><body><div><div class="card maxwidth900"><div class="card-header h4" id=banner><button class=level_up>ü†â</button> Model's Heart><span class=h5 id=path></span></div><div class="card-body files-card"><table class="files table table-striped table-borderless" style="table-layout: fixed;"><colgroup><col id=files-col1 /><col id=files-col2 /><col id=files-col3 /><col id=files-col4 /></colgroup><thead><tr><th></th><th>–ù–∞–∑–≤–∞</th><th>–†–æ–∑–º—ñ—Ä</th><th>–ó–Ω–∏¬≠—â–∏—Ç–∏</th></tr></thead><tbody id=list class=files></tbody></table><div><form class=m2 enctype=multipart/form-data onsubmit=return!1><h5>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª</h5><div class=input-group><label class=input-group-prepend><span class=input-group-text style=width:100px;>–ü–∞–ø–∫–∞</span></label><input id=dir type=text class=form-control /></div><div class=input-group><label class=input-group-btn><span class="btn btn-primary" style=width:100px;>–§–∞–π–ª‚Ä¶<input type=file style="display: none;" id=file /></span></label><input id=fname type=text class=form-control readonly /></div><span class=help-block>–í–∏–±–µ—Ä—ñ—Ç—å —Ñ–∞–π–ª–∏ —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏"</span> <button id=upload type=submit class="btn btn-primary float-right">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button></form><br /></div></div><script>function str(n){return parseFloat(Math.round(n*100)/100).toFixed(2)}function formatBytes(n){return n<1024?n+" b":n<1048576?str(n/1024)+" Kb":n<1073741824?str(n/1048576)+" Mb":str(bytes/1073741824)+" Gb"}function parent(){var n=curPath;return n.endsWith("/")&&(n=n.substring(0,n.length-1)),n!=""&&(n=n.replace(n.split("/").pop(),"")),n}function fileComparator(n,t){return n.dir<t.dir?1:n.dir>t.dir?-1:n.Name<t.Name?-1:n.Name>t.Name?1:0}function download(n,t){var i=document.createElement("a");i.download=t;i.href=n;i.click()}function getList(n){$.ajax({url:"/api/dir?path="+n,success:function(t){var r,i;curPath=n;$("#dir").val(curPath);r=t;r.sort(fileComparator);i="";$.each(r,function(n,t){i+="<tr><td><div class='";t.dir==!1?(i+="file",i+="'>&#128463;<\/td><td class='fname'>",i+=t.Name,i+="<\/td><td class='text-center'>",i+=formatBytes(t.Size),i+="<\/td><td><button class='del' file='"+t.Name+"' >&#9003;<\/button>"):(i+="dir",i+="'>&#128193;<\/td><td class='fdir'>",i+=t.Name,i+="<\/td><td><\/td><td><button class='del' file='"+t.Name+"' >&#9003;<\/button>");i+="<\/td><\/tr>"});$("#path").text(curPath);$("#list").html(i);curPath=="/"?$(".level_up").attr("disabled","disabled"):$(".level_up").removeAttr("disabled");$(".del").on("click",function(){var n=curPath+this.getAttribute("file");fileDelete(this,n)});$(".fname").on("click",function(){download(curPath+this.innerText+"?download=1",this.innerText)});$(".fdir").on("click",function(){getList(curPath+this.innerText+"/")});$(".level_up").off("click");$(".level_up").on("click",function(){var n=parent();getList(n)})},error:function(n){console.log(n)}})}function getUrlParameter(n){for(var u=window.location.search.substring(1),r=u.split("&"),t,i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===n)return t[1]===undefined?!0:decodeURIComponent(t[1])}function fileDelete(n,t){ShowConfirm("–í–∏–¥–∞–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É",'–§–∞–π–ª "'+t+'" –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–æ.',function(){$.ajax({url:"/api/dir?path="+t,type:"DELETE",statusCode:{200:function(){var t=$(n).closest("tr");t.find("td").fadeOut(300,function(){t.remove()});Hide_Click()}}})},"–¢–∞–∫. –ó–Ω–∏—â–∏—Ç–∏","–ù—ñ")}function ShowAlert(n,t,i,r,u,f){$("#modalDialog .modal-title").html(n);$("#modalDialog .modal-msg").html(t);let e=$("#modalDialog .btn-yes");if(e.off("click"),i)e.on("click",i);else e.on("click",Hide_Click);r?(e.html(r),e.show()):e.hide();let o=$("#modalDialog .btn-no");if(o.off("click"),f)o.on("click",f);else o.on("click",Hide_Click);u?o.html(u):o.html("–ù—ñ");o.hide();$("#modalDialog").modal({backdrop:!0})}function ShowConfirm(n,t,i,r,u,f){$("#modalDialog .modal-title").html(n);$("#modalDialog .modal-msg").html(t);let o=$("#modalDialog .btn-yes");o.off("click");o.on("click",i);r?o.html(r):o.html("–¢–∞–∫");let e=$("#modalDialog .btn-no");if(e.off("click"),f)e.on("click",f);else e.on("click",Hide_Click);u?e.html(u):e.html("–ù—ñ");e.show();$("#modalDialog .modal-footer").show();$("#modalDialog").modal({backdrop:"static"})}function Hide_Click(){$("#modalDialog").modal("hide")}var curPath="/";$(function(){$(document).on("change",":file",function(){var n=$(this),u=n.get(0).files?n.get(0).files.length:1,i=n.val().replace(/\\/g,"/").replace(/.*\//,""),t=i,r=getUrlParameter("dir");r!=undefined&&(t=r+i,$("#dir").val(t));n.trigger("fileselect",[u,t])});$(document).ready(function(){$(":file").on("fileselect",function(n,t,i){var u=$(this).parents(".input-group").find(":text"),r=t>1?t+" files selected":i;u.length?u.val(r):r&&alert(r)})})});$("#upload").click(function(){var n=$("#file")[0].files[0],t;if(n==undefined){ShowAlert("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É","–§–∞–π–ª –Ω–µ –≤–∏–±—Ä–∞–Ω–æ",null,"–ê–≥–∞. –ó—Ä–æ–∑—É–º—ñ–ª–æ.");return}t=new FormData;t.append("file",n);$.ajax({url:"/api/dir?path="+$("#dir").val(),type:"POST",data:t,processData:!1,contentType:!1,statusCode:{200:function(){getList(curPath);$("#file").val(null);$("#fname").val(null);$("#dir").val(null);ShowAlert("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É",'–§–∞–π–ª "'+n.name+'" –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ.',function(){getList($("#path").text());Hide_Click()},"–ù–∞—Ä–µ—à—Ç—ñ")}}});ShowAlert("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É","–§–∞–π–ª –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è...",null,null)})</script></div></div><div class="modal fade" id=modalDialog role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h4 class=modal-title>–ó–Ω–∏—â–∏—Ç–∏ —Ñ–∞–π–ª</h4></div><div class=modal-body><p class=modal-msg>–ó–Ω–∏—â–∏—Ç–∏ —Ñ–∞–π–ª –±–µ–∑–ø–æ–≤–æ—Ä–æ—Ç–Ω–æ?</p></div><div class=modal-footer><button type=button class="btn btn-yes btn-default">–¢–∞–∫. –ó–Ω–∏—â–∏—Ç–∏</button> <button type=button class="btn btn-no btn-primary" data-dismiss=modal>–ù—ñ</button></div></div></div></div><script>ShowConfirm("Model's Heart","–ó–º—ñ–Ω–∏ —É —Ñ–∞–π–ª–æ–≤—ñ–π —Å–∏—Å—Ç–µ–º—ñ –º–æ–∂—É—Ç—å –∑–∞—à–∫–æ–¥–∏—Ç–∏, –∞–±–æ —É–Ω–µ–º–æ–∂–ª–∏–≤–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –ø—Ä–∏–ª–∞–¥—É. –í—Å—ñ –∑–º—ñ–Ω–∏ –≤–∏ –∑–¥—ñ–π—Å–Ω—é—î—Ç–µ –Ω–∞ –≤–ª–∞—Å–Ω–∏–π —Ä–∏–∑–∏–∫.",function(){$("#modalDialog").modal("hide");getList("/")},"–¢–∞–∫. –Ø —Ä–æ–∑—É–º—ñ—é.","–¢–∞ –Ω—É –π–æ–≥–æ...",function(){document.location.href="/"})</script></body></html>